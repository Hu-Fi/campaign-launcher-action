name: Launch Campaign Example

on:
  schedule:
    # Run daily at 6 AM UTC
    - cron: "0 6 * * *"
  workflow_dispatch:
    inputs:
      chain_id:
        description: "Blockchain chain ID (e.g., 137 for Polygon)"
        required: true
        default: "137"
      symbol:
        description: "Trading pair symbol (e.g., HMT/USDT)"
        required: true
        default: "HMT/USDT"
      exchange_name:
        description: "Exchange name (e.g., mexc, bybit)"
        required: true
        default: "mexc"
      reward_amount:
        description: "Amount of reward tokens"
        required: true
        default: "1000"
      daily_volume_target:
        description: "Daily volume target"
        required: true
        default: "100000"

jobs:
  launch-campaign:
    runs-on: ubuntu-latest
    steps:
      - name: Launch campaign escrow
        id: create-escrow
        uses: Hu-Fi/campaign-launcher-action@COMMIT_HASH_PLACEHOLDER
        with:
          chain_id: ${{ github.event.inputs.chain_id || '137' }}
          daily_volume_target: ${{ github.event.inputs.daily_volume_target || '100000' }}
          duration: "1"
          exchange_name: ${{ github.event.inputs.exchange_name || 'mexc' }}
          exchange_oracle_address: "0x1234567890123456789012345678901234567890"
          gas_warn_threshold: "0.5"
          recording_oracle_address: "0x2234567890123456789012345678901234567890"
          reputation_oracle_address: "0x3234567890123456789012345678901234567890"
          reward_amount: ${{ github.event.inputs.reward_amount || '1000' }}
          reward_token: "HMT"
          start_delay: "3600"
          symbol: ${{ github.event.inputs.symbol || 'HMT/USDT' }}
        env:
          WEB3_RPC_URL: ${{ secrets.WEB3_RPC_URL }}
          WEB3_PRIVATE_KEY: ${{ secrets.WEB3_PRIVATE_KEY }}
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: Display escrow address
        run: |
          echo "‚úÖ Escrow created successfully!"
          echo "üìç Escrow address: ${{ steps.create-escrow.outputs.escrow_address }}"
          echo ""
          echo "You can view it on the blockchain explorer"
